import { HEADERS } from './conf'

export class Client {

    static send({ method, path, data, token }) {
        const fetch = process.browser ? window.fetch : require('node-fetch').default;
        return fetch(path, {
            method,
            headers: HEADERS(token),
            body: JSON.stringify(data)
        })
            .then(r => r.text())
            .then(json => {
                try {
                    return JSON.parse(json);
                } catch (err) {
                    return json;
                }
            });
    }
}